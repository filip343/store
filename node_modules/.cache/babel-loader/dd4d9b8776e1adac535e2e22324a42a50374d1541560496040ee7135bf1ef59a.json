{"ast":null,"code":"import{useState}from\"react\";import{auth}from\"../firebase/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function BuyUI(params){const{prodId,available,price,name}=params;const[quantity,setQuantity]=useState(1);const changeQuantity=function(e){let direction=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var iqua=parseInt(quantity);var quantToSet=e===undefined?iqua+direction<1?quantity:iqua+direction:e.target.value;if(quantToSet>available)quantToSet=quantity;setQuantity(quantToSet);};const preventInput=evt=>{var keys=[\"e\",\"E\",\"+\",\"-\",\",\",\".\"];if(evt.target.value.length===0){keys.push('0');}keys.includes(evt.key)&&evt.preventDefault();};const addToCart=()=>{var cart=JSON.parse(localStorage.getItem(\"cart\")||\"[]\");var isInCart=false;cart.map(elem=>{if(elem._id===prodId){isInCart=true;elem.quantity+=quantity;}return elem;});if(!isInCart)cart.push({_id:prodId,name:name,price:price,quantity:quantity});localStorage.setItem(\"cart\",JSON.stringify(cart));if(auth.currentUser){const options={method:\"PATCH\",body:JSON.stringify({uid:JSON.parse(localStorage.getItem(\"userData\")).uid,cart:JSON.parse(localStorage.getItem(\"cart\"))}),headers:{'Access-Control-Allow-Origin':\"http://localhost:3000\",\"Content-Type\":\"application/json\"}};fetch('http://localhost:8080/userCart',options);}};return/*#__PURE__*/_jsx(\"div\",{className:\"BuyUI\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"name\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"available\",children:[\"AVAILABLE: \",available]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"minus\",onClick:()=>{changeQuantity(undefined,-1);},children:\" - \"}),/*#__PURE__*/_jsx(\"input\",{onKeyDown:evt=>preventInput(evt),value:quantity,onChange:e=>{changeQuantity(e);},type:\"number\",min:1}),/*#__PURE__*/_jsx(\"button\",{className:\"plus\",onClick:()=>{changeQuantity(undefined,1);},children:\" + \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"perU\",children:[\"PER UNIT: $\",price]}),/*#__PURE__*/_jsx(\"div\",{className:\"summary\",children:\"SUMMARY: \".concat(quantity,\" x $\").concat(price)}),/*#__PURE__*/_jsx(\"div\",{className:\"totalPrice\",children:\"TOTAL PRICE: $\".concat((price*quantity).toFixed(2))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buyBtns\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"buy\",children:\"BUY\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toCart\",onClick:addToCart,children:\"ADD TO CART\"})]})]})});}","map":{"version":3,"names":["useState","auth","jsx","_jsx","jsxs","_jsxs","BuyUI","params","prodId","available","price","name","quantity","setQuantity","changeQuantity","e","direction","arguments","length","undefined","iqua","parseInt","quantToSet","target","value","preventInput","evt","keys","push","includes","key","preventDefault","addToCart","cart","JSON","parse","localStorage","getItem","isInCart","map","elem","_id","setItem","stringify","currentUser","options","method","body","uid","headers","fetch","className","children","onClick","onKeyDown","onChange","type","min","concat","toFixed"],"sources":["C:/Users/PC/Desktop/sklep/code/site_/src/ProductPage/BuyUI.js"],"sourcesContent":["import {useState } from \"react\";\r\nimport { auth } from \"../firebase/firebase\";\r\n\r\nexport function BuyUI(params){\r\n\r\n  const {prodId,available,price,name} = params;\r\n  const [quantity,setQuantity] = useState(1);\r\n  const changeQuantity=(e, direction=0)=>{\r\n    var iqua = parseInt(quantity);\r\n\r\n\r\n    var quantToSet=e===undefined?(iqua+ direction<1?quantity:iqua+direction): e.target.value;\r\n    \r\n    if(quantToSet>available)quantToSet=quantity;\r\n    setQuantity(quantToSet)\r\n  }\r\n  const preventInput = (evt)=>{\r\n    var keys =[\"e\",\"E\",\"+\",\"-\",\",\",\".\"]\r\n    if(evt.target.value.length===0){\r\n      keys.push('0');\r\n    }\r\n    keys.includes(evt.key) && evt.preventDefault()\r\n  }\r\n  const addToCart = ()=>{\r\n    var cart = JSON.parse(localStorage.getItem(\"cart\")||\"[]\");\r\n    var isInCart=false;\r\n    cart.map(elem => {\r\n      if(elem._id===prodId){\r\n        isInCart=true;\r\n        elem.quantity+=quantity;\r\n      }\r\n      return elem\r\n    });\r\n    if(!isInCart)cart.push({_id:prodId,name:name,price:price,quantity:quantity});\r\n    localStorage.setItem(\"cart\",JSON.stringify(cart));\r\n    if(auth.currentUser){\r\n      const options = {    method: \"PATCH\", \r\n      body:JSON.stringify({\r\n        uid:JSON.parse(localStorage.getItem(\"userData\")).uid,\r\n        cart:JSON.parse(localStorage.getItem(\"cart\"))\r\n      }), \r\n      headers: {\r\n        'Access-Control-Allow-Origin':\"http://localhost:3000\",\r\n        \"Content-Type\": \"application/json\"\r\n      }};\r\n      fetch('http://localhost:8080/userCart',options)\r\n    }\r\n  }\r\n\r\n  return(\r\n  <div className=\"BuyUI\">\r\n    <div className=\"container\">\r\n      <label className=\"name\">{name}</label>\r\n      <div className=\"available\">AVAILABLE: {available}</div>\r\n      <div className=\"quantity\">\r\n        <button className=\"minus\" onClick={()=>{changeQuantity(undefined,-1)}}> - </button>\r\n        <input onKeyDown={(evt)=>preventInput(evt)} value={quantity} onChange={(e)=>{changeQuantity(e)}} type=\"number\" min={1}/>\r\n        <button className=\"plus\" onClick={()=>{changeQuantity(undefined,1)}}> + </button>\r\n      </div>\r\n      <div className=\"price\">\r\n        <div className=\"perU\">PER UNIT: ${price}</div>\r\n        <div className=\"summary\">{`SUMMARY: ${quantity} x $${price}`}</div>\r\n        <div className=\"totalPrice\">{`TOTAL PRICE: $${(price*quantity).toFixed(2)}`}</div>\r\n      </div>\r\n      <div className=\"buyBtns\">\r\n        <div className=\"buy\">BUY</div>\r\n        <div className=\"toCart\" onClick={addToCart}>ADD TO CART</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}