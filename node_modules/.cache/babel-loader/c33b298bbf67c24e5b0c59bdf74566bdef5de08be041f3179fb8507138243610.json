{"ast":null,"code":"import{useState}from\"react\";import{auth}from\"../firebase/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function BuyUI(params){const{prodId,available,price,name}=params;const[quantity,setQuantity]=useState(1);const handleOnChange=e=>{e.preventDefault();changeQuantity(e);if(e.target.value===\"\"){setQuantity(1);}};const changeQuantity=function(e){let direction=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var iqua=parseInt(quantity);var quantToSet=e===undefined?iqua+direction<1?quantity:iqua+direction:e.target.value;if(quantToSet>available)quantToSet=quantity;setQuantity(quantToSet);console.log(direction);};const preventInput=evt=>{var keys=[\"e\",\"E\",\"+\",\"-\",\",\",\".\",\"Enter\"];if(evt.target.value.length===0){keys.push('0');}keys.includes(evt.key)&&evt.preventDefault();};const addToCart=()=>{var cart=JSON.parse(localStorage.getItem(\"cart\")||\"[]\");var isInCart=false;cart.map(elem=>{if(elem._id===prodId){isInCart=true;elem.quantity+=quantity;}return elem;});if(!isInCart)cart.push({_id:prodId,name:name,price:price,quantity:quantity});localStorage.setItem(\"cart\",JSON.stringify(cart));if(auth.currentUser){const options={method:\"PATCH\",body:JSON.stringify({uid:JSON.parse(localStorage.getItem(\"userData\")).uid,cart:JSON.parse(localStorage.getItem(\"cart\"))}),headers:{'Access-Control-Allow-Origin':\"http://localhost:3000\",\"Content-Type\":\"application/json\"}};fetch('http://localhost:8080/userCart',options);}};return/*#__PURE__*/_jsx(\"div\",{className:\"BuyUI\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"name\",children:name}),/*#__PURE__*/_jsxs(\"div\",{className:\"available\",children:[\"AVAILABLE: \",available]}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"minus\",onClick:e=>{e.preventDefault();changeQuantity(undefined,-1);},children:\" - \"}),/*#__PURE__*/_jsx(\"input\",{onKeyDown:evt=>preventInput(evt),value:quantity,onChange:e=>{handleOnChange(e);},type:\"number\",min:1}),/*#__PURE__*/_jsx(\"button\",{className:\"plus\",onClick:e=>{e.preventDefault();changeQuantity(undefined,1);},children:\" + \"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"perU\",children:[\"PER UNIT: $\",price]}),/*#__PURE__*/_jsx(\"div\",{className:\"summary\",children:\"SUMMARY: \".concat(quantity,\" x $\").concat(price)}),/*#__PURE__*/_jsx(\"div\",{className:\"totalPrice\",children:\"TOTAL PRICE: $\".concat((price*quantity).toFixed(2))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buyBtns\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"buy\",children:\"BUY\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toCart\",onClick:addToCart,children:\"ADD TO CART\"})]})]})});}","map":{"version":3,"names":["useState","auth","jsx","_jsx","jsxs","_jsxs","BuyUI","params","prodId","available","price","name","quantity","setQuantity","handleOnChange","e","preventDefault","changeQuantity","target","value","direction","arguments","length","undefined","iqua","parseInt","quantToSet","console","log","preventInput","evt","keys","push","includes","key","addToCart","cart","JSON","parse","localStorage","getItem","isInCart","map","elem","_id","setItem","stringify","currentUser","options","method","body","uid","headers","fetch","className","children","onClick","onKeyDown","onChange","type","min","concat","toFixed"],"sources":["C:/Users/PC/Desktop/sklep/code/site_/src/ProductPage/BuyUI.js"],"sourcesContent":["import {useState } from \"react\";\r\nimport { auth } from \"../firebase/firebase\";\r\n\r\nexport function BuyUI(params){\r\n\r\n  const {prodId,available,price,name} = params;\r\n  const [quantity,setQuantity] = useState(1);\r\n  const handleOnChange = (e)=>{\r\n    e.preventDefault();\r\n    changeQuantity(e);\r\n    if(e.target.value===\"\")\r\n    {\r\n      setQuantity(1);\r\n    }\r\n  }\r\n  const changeQuantity=(e, direction=0)=>{\r\n    var iqua = parseInt(quantity);\r\n    var quantToSet=e===undefined?(iqua+ direction<1?quantity:iqua+direction): e.target.value;\r\n    \r\n    if(quantToSet>available)quantToSet=quantity;\r\n    setQuantity(quantToSet);\r\n    console.log(direction);\r\n  }\r\n  const preventInput = (evt)=>{\r\n    var keys =[\"e\",\"E\",\"+\",\"-\",\",\",\".\",\"Enter\"]\r\n    if(evt.target.value.length===0){\r\n      keys.push('0');\r\n    }\r\n    keys.includes(evt.key) && evt.preventDefault()\r\n  }\r\n  const addToCart = ()=>{\r\n    var cart = JSON.parse(localStorage.getItem(\"cart\")||\"[]\");\r\n    var isInCart=false;\r\n    cart.map(elem => {\r\n      if(elem._id===prodId){\r\n        isInCart=true;\r\n        elem.quantity+=quantity;\r\n      }\r\n      return elem\r\n    });\r\n    if(!isInCart)cart.push({_id:prodId,name:name,price:price,quantity:quantity});\r\n    localStorage.setItem(\"cart\",JSON.stringify(cart));\r\n    if(auth.currentUser){\r\n      const options = {    method: \"PATCH\", \r\n      body:JSON.stringify({\r\n        uid:JSON.parse(localStorage.getItem(\"userData\")).uid,\r\n        cart:JSON.parse(localStorage.getItem(\"cart\"))\r\n      }), \r\n      headers: {\r\n        'Access-Control-Allow-Origin':\"http://localhost:3000\",\r\n        \"Content-Type\": \"application/json\"\r\n      }};\r\n      fetch('http://localhost:8080/userCart',options)\r\n    }\r\n  }\r\n\r\n  return(\r\n  <div className=\"BuyUI\">\r\n    <div className=\"container\">\r\n      <label className=\"name\">{name}</label>\r\n      <div className=\"available\">AVAILABLE: {available}</div>\r\n      <div className=\"quantity\">\r\n\r\n        <button className=\"minus\" onClick={(e)=>{e.preventDefault();changeQuantity(undefined,-1)}}> - </button>\r\n        \r\n        <input onKeyDown={(evt)=>preventInput(evt)} value={quantity} onChange={(e)=>{handleOnChange(e)}} type=\"number\" min={1}/>\r\n\r\n        <button className=\"plus\" onClick={(e)=>{e.preventDefault();changeQuantity(undefined,1)}}> + </button>\r\n\r\n      </div>\r\n      <div className=\"price\">\r\n        <div className=\"perU\">PER UNIT: ${price}</div>\r\n        <div className=\"summary\">{`SUMMARY: ${quantity} x $${price}`}</div>\r\n        <div className=\"totalPrice\">{`TOTAL PRICE: $${(price*quantity).toFixed(2)}`}</div>\r\n      </div>\r\n      <div className=\"buyBtns\">\r\n        <div className=\"buy\">BUY</div>\r\n        <div className=\"toCart\" onClick={addToCart}>ADD TO CART</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}